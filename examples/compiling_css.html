<!DOCTYPE html>
<html>
	<head>
		<title>Parsing CSS Source</title>
		<script type="text/javascript">
			ScriptedCss = {};
		</script>
		<script type="text/javascript" src="../vendor/jquery-1.5.min.js"></script>
		<script type="text/javascript" src="../dist/scripted_css.js"></script>
		<script type="text/scripted-css">
			body {
				margin: 0;
				padding: 0;
				display: "a.b.c" / 20px
								 "def.g" / *
								 * 100px * 10px *;
			}

			body::slot(e) { vertical-align: middle; text-align: center; }

			#source-title { position: a; }
			#source-area  { position: d; }
			#button-area  { position: e; }
			#tokens-title { position: b; }
			#tokens-area  { position: f; }
			#output-title { position: c; }
			#output-area  { position: g; }

			textarea { width: 100%; height: 100%; }
		</script>

		<script type="text/javascript">
			$(function() {
				$("#compile-input").click(function() {
					var source = $("#source-area").val();
					var tokens = ScriptedCss.CssParser.Lexer.tokenize(source);
					var output;

					try {
						var css = ScriptedCss.CssParser.parse(source);

						ScriptedCss.trigger("scriptLoaded", css);
						ScriptedCss.trigger("cssReady", css);

						output = css.string();
					} catch(error) {
						output = error;
					}

					var tokenString = "";

					for (var i = 0; i < tokens.length; i++) {
						var token = tokens[i];

						tokenString += "[" + token[0] + ", " + token[1] + "]\n";
					}

					$("#tokens-area").val(tokenString);
					$("#output-area").val(output);
				});
			});
		</script>
	</head>
	<body>
		<div id="source-title">Input here</div>
		<textarea id="source-area">
body {
	margin: 0;
	padding: 0;
	display: "a.b.c" / 20px
					 "def.g" / *
					 * 100px * 10px *;
}

body::slot(e) { vertical-align: middle; text-align: center; }

#source-title { position: a; }
#source-area  { position: d; }
#button-area  { position: e; }
#tokens-title { position: b; }
#tokens-area  { position: f; }
#output-title { position: c; }
#output-area  { position: g; }

textarea { width: 100%; height: 100%; }
		</textarea>

		<div id="button-area"><button type="button" id="compile-input">Parse CSS &raquo;</button></div>

		<div id="tokens-title">Generated Tokens</div>
		<textarea id="tokens-area"></textarea>

		<div id="output-title">Output CSS</div>
		<textarea id="output-area"></textarea>
	</body>
</html>
